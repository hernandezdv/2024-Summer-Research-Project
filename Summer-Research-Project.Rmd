
```{r}
library(tidyverse)
```

```{r}
library(LaF)
```

```{r}
widths <- read.csv("Extracted pages from 2021_YRBS_Data_Users_Guide_508.xlsx - Sheet2.csv", header=TRUE)
```

```{r}
dat0 <- laf_open_fwf("XXH2021_YRBS_Data.dat", column_widths=widths$Length, column_names=widths$Variable, column_types=rep("string", nrow(widths)))
```

```{r}
dat <- dat0[,]; str(dat)
```

```{r}
v2k <- c('Q1',	'Q2',	'Q3',	'Q4',	'RACEETH',	'Q8',	'Q9',	'Q10',	'Q11',	'Q12',	'Q13',	'Q14',	'Q15',	'Q16',	'Q17',	'Q18',	'Q19',	'Q20',	'Q21',	'Q22',	'Q23',	'Q24',	'Q25',	'Q26',	'Q27',	'Q28',	'Q29',	'Q30',	'Q31',	'Q32',	'Q33',	'Q34',	'Q35',	'Q36',	'Q37',	'Q38',	'Q40',	'Q41',	'Q42',	'Q43',	'Q44',	'Q45',	'Q46',	'Q47',	'Q48',	'Q49',	'Q50',	'Q51',	'Q52',	'Q53',	'Q54',	'Q55',	'Q56',	'Q57',	'Q58',	'Q59',	'Q60',	'Q61',	'Q62',	'Q63',	'Q64',	'Q65',	'Q68',	'Q69',	'Q70',	'Q71',	'Q72',	'Q73',	'Q74',	'Q76',	'Q77',	'Q78',	'Q79',	'Q80',	'Q82',	'Q83',	'Q84',	'Q85',	'QN85', 'Q86',	'Q87',	'Q88',	'Q89',	'Q93',	'Q95',	'Q96',	'Q99')
```

```{r}
'%!in%' <- Negate('%in%') #not in function. shows which variables are not in the dataset. should be 0 
```

```{r}
v2k[which(v2k %!in% names(dat))]
```

```{r}
sdat <- dat[,v2k] 
```

```{r}
sdat$Q2 <- factor(sdat$Q2, levels=rev(1:2), labels=rev(c("Female", "Male")))
sdat$QN85 <- factor(sdat$QN85, levels=rev(1:2), labels=rev(c("Yes", "No")))
```




